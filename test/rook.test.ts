import test from 'ava'
import { computeMovesAsStringBoard } from './testUtils.js'

test('rook captures and blocked squares', t => {
	const board = [
		[" ", " ", " ", " ", " ", " ", " ", " "],
		[" ", " ", " ", " ", " ", " ", " ", " "],
		[" ", " ", " ", " ", " ", " ", " ", " "],
		[" ", " ", " ", "P", "P", "P", " ", " "],
		[" ", " ", " ", " ", "_r", " ", " ", " "],
		[" ", " ", " ", "p", " ", "p", " ", " "],
		["K", " ", " ", " ", " ", " ", " ", "k"],
		[" ", " ", " ", " ", " ", " ", " ", " "]
	]

	const actual = computeMovesAsStringBoard(board)

	const expected = [
		[" ", " ", " ", " ", " ", " ", " ", " "],
		[" ", " ", " ", " ", " ", " ", " ", " "],
		[" ", " ", " ", " ", " ", " ", " ", " "],
		[" ", " ", " ", "P", "x", "P", " ", " "],
		["x", "x", "x", "x", "r", "x", "x", "x"],
		[" ", " ", " ", "p", "x", "p", " ", " "],
		["K", " ", " ", " ", "x", " ", " ", "k"],
		[" ", " ", " ", " ", "x", " ", " ", " "]
	]

	t.deepEqual(actual, expected)
})

test('rook is blocked in some directions but has some moves', t => {
	const board = [
		[" ", " ", " ", " ", " ", " ", " ", " "],
		[" ", " ", " ", " ", " ", " ", " ", " "],
		[" ", " ", " ", " ", " ", " ", " ", " "],
		[" ", " ", " ", "p", " ", " ", " ", " "],
		[" ", " ", "p", "p", "_r", "p", "p", " "],
		[" ", " ", " ", "p", " ", " ", " ", " "],
		["K", " ", " ", " ", " ", " ", " ", "k"],
		[" ", " ", " ", " ", " ", " ", " ", " "]
	]

	const actual = computeMovesAsStringBoard(board)

	const expected = [
		[" ", " ", " ", " ", "x", " ", " ", " "],
		[" ", " ", " ", " ", "x", " ", " ", " "],
		[" ", " ", " ", " ", "x", " ", " ", " "],
		[" ", " ", " ", "p", "x", " ", " ", " "],
		[" ", " ", "p", "p", "r", "p", "p", " "],
		[" ", " ", " ", "p", "x", " ", " ", " "],
		["K", " ", " ", " ", "x", " ", " ", "k"],
		[" ", " ", " ", " ", "x", " ", " ", " "]
	]

	t.deepEqual(actual, expected)
})

