import test from "ava";
import { computeMovesAsStringBoard } from "./testUtils.js";

test('check returns null for move', t => {
    const board = [
		[" ", " ", " ", " ", " ", " ", " ", " "],
		[" ", " ", " ", "P", "b", " ", " ", " "],
		[" ", " ", " ", " ", " ", " ", " ", " "],
		[" ", " ", "K", " ", " ", " ", " ", " "],
		[" ", " ", " ", " ", " ", " ", " ", " "],
		[" ", " ", " ", " ", "k", "_P", " ", " "],
		[" ", " ", " ", " ", " ", " ", " ", " "],
		[" ", " ", " ", " ", " ", " ", " ", " "]
	]

    const actual = computeMovesAsStringBoard(board)

    const expected = [
		[" ", " ", " ", " ", " ", " ", " ", " "],
		[" ", " ", " ", "P", "b", " ", " ", " "],
		[" ", " ", " ", " ", " ", " ", " ", " "],
		[" ", " ", "K", " ", " ", " ", " ", " "],
		[" ", " ", " ", " ", " ", " ", " ", " "],
		[" ", " ", " ", " ", "k", "P", " ", " "],
		[" ", " ", " ", " ", " ", " ", " ", " "],
		[" ", " ", " ", " ", " ", " ", " ", " "]
	]

    t.deepEqual(actual, expected)
})

test('check allows move when king becomes free', t => {
    const board = [
		[" ", " ", " ", " ", " ", " ", " ", " "],
		[" ", " ", " ", "P", "b", " ", " ", " "],
		[" ", " ", " ", " ", " ", " ", " ", " "],
		[" ", " ", "_K", " ", " ", " ", " ", " "],
		[" ", " ", " ", " ", " ", " ", " ", " "],
		[" ", " ", " ", " ", "k", "P", " ", " "],
		[" ", " ", " ", " ", " ", " ", " ", " "],
		[" ", " ", " ", " ", " ", " ", " ", " "]
	]

    const actual = computeMovesAsStringBoard(board)

    const expected = [
		[" ", " ", " ", " ", " ", " ", " ", " "],
		[" ", " ", " ", "P", "b", " ", " ", " "],
		[" ", "x", "x", " ", " ", " ", " ", " "],
		[" ", "x", "K", "x", " ", " ", " ", " "],
		[" ", " ", "x", " ", " ", " ", " ", " "],
		[" ", " ", " ", " ", "k", "P", " ", " "],
		[" ", " ", " ", " ", " ", " ", " ", " "],
		[" ", " ", " ", " ", " ", " ", " ", " "]
	]

    t.deepEqual(actual, expected)
})